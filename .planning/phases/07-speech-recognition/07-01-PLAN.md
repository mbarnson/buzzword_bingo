# Phase 7 Plan 01: Speech Framework Integration

## Objective
Integrate Apple's Speech framework for on-device speech recognition.

## Context
@Buzzword Bingo/Buzzword Bingo/Buzzword_BingoApp.swift
@Buzzword Bingo/Buzzword Bingo/Models/BingoCard.swift

## Tasks

### Task 1: Create SpeechRecognitionService
**Type:** create
**Files:** `Buzzword Bingo/Buzzword Bingo/Services/SpeechRecognitionService.swift`
**Action:**
- Create `@Observable` class `SpeechRecognitionService`
- Properties:
  - `isListening: Bool`
  - `isAuthorized: Bool`
  - `transcript: String` (current recognized text)
  - `lastError: String?`
- Methods:
  - `requestAuthorization() async -> Bool`
  - `startListening()`
  - `stopListening()`
- Use `SFSpeechRecognizer` and `AVAudioEngine`
- Configure for continuous recognition (not one-shot)
- Use on-device recognition where available (`requiresOnDeviceRecognition`)
- Handle iOS vs macOS differences

**Verify:** Service compiles with no errors

### Task 2: Add Permissions to Info.plist
**Type:** modify
**Files:** `Buzzword Bingo/Buzzword Bingo/Info.plist` (create if needed)
**Action:**
- Add `NSSpeechRecognitionUsageDescription` - "Buzzword Bingo listens for buzzwords during meetings to auto-mark your card."
- Add `NSMicrophoneUsageDescription` - "Buzzword Bingo needs microphone access to hear buzzwords in meetings."

**Verify:** Keys are present in Info.plist

### Task 3: Add OnPhraseHeard Callback
**Type:** modify
**Files:** `Buzzword Bingo/Buzzword Bingo/Services/SpeechRecognitionService.swift`
**Action:**
- Add callback closure: `var onPhraseRecognized: ((String) -> Void)?`
- When speech is recognized, call the callback with the new text
- Implement debouncing to avoid rapid-fire callbacks
- Clear transcript periodically to avoid memory buildup

**Verify:** Callback fires when speech is recognized

### Task 4: Build Verification
**Type:** verify
**Action:** Build both platforms
**Verify:** Speech framework imports correctly, no compile errors

## Verification
- [ ] SpeechRecognitionService created
- [ ] Info.plist has required permissions
- [ ] Callback mechanism works
- [ ] Both platforms compile

## Success Criteria
- Speech recognition starts and stops cleanly
- Recognized text is available via callback
- Permissions are properly requested

## Output
Create `07-01-SUMMARY.md` documenting speech service implementation.
