---
phase: 02-gameplay
plan: 02
type: execute
domain: iphone-apps
---

<objective>
Add bingo detection logic to recognize winning patterns.

Purpose: Detect when a player has 5 in a row (horizontal, vertical, or diagonal).
Output: BingoCard knows when it has a bingo and which squares form the winning line.
</objective>

<execution_context>
@~/.claude/skills/create-plans/workflows/execute-phase.md
@~/.claude/skills/create-plans/templates/summary.md
</execution_context>

<context>
@.planning/BRIEF.md
@.planning/ROADMAP.md
@.planning/phases/02-gameplay/02-01-SUMMARY.md
@Buzzword Bingo/Buzzword Bingo/Models/BingoCard.swift
@Buzzword Bingo/Buzzword Bingo/Views/BingoSquareView.swift
@Buzzword Bingo/Buzzword Bingo/Views/BingoGridView.swift
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add bingo checking logic to BingoCard</name>
  <files>Buzzword Bingo/Buzzword Bingo/Models/BingoCard.swift</files>
  <action>
Add methods to detect bingo:

1. Define all possible winning lines (indices):
   - 5 rows: [0-4], [5-9], [10-14], [15-19], [20-24]
   - 5 columns: [0,5,10,15,20], [1,6,11,16,21], etc.
   - 2 diagonals: [0,6,12,18,24], [4,8,12,16,20]

2. Add computed property `winningLines: [[Int]]` that returns all lines where all 5 squares are marked

3. Add computed property `hasBingo: Bool` that returns true if any winning line exists

4. Add computed property `winningSquareIndices: Set<Int>` that returns indices of all squares in winning lines (for highlighting)
  </action>
  <verify>Unit test or playground: mark a row, hasBingo returns true</verify>
  <done>BingoCard correctly detects all bingo patterns</done>
</task>

<task type="auto">
  <name>Task 2: Highlight winning squares in the grid</name>
  <files>Buzzword Bingo/Buzzword Bingo/Views/BingoSquareView.swift, Buzzword Bingo/Buzzword Bingo/Views/BingoGridView.swift</files>
  <action>
Add visual highlighting for winning squares:

BingoSquareView:
- Add `isWinning: Bool` parameter
- When isWinning is true, use a gold/yellow background and border
- Add subtle animation or glow effect for winning squares

BingoGridView:
- Pass winningSquareIndices from card to each square
- Check if each square's index is in the winning set
  </action>
  <verify>Mark 5 in a row, those squares turn gold</verify>
  <done>Winning squares are visually distinct with gold highlighting</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `xcodebuild -scheme "Buzzword Bingo" -destination 'platform=macOS' build` succeeds
- [ ] Marking 5 in a row triggers hasBingo = true
- [ ] Marking 5 in a column triggers hasBingo = true
- [ ] Marking 5 diagonally triggers hasBingo = true
- [ ] Winning squares turn gold
- [ ] Multiple bingos highlight all winning lines
</verification>

<success_criteria>
- Bingo detection works for all 12 possible lines
- Winning squares are clearly highlighted
- Detection is instant (no lag)
- Ready for win state overlay
</success_criteria>

<output>
After completion, create `.planning/phases/02-gameplay/02-02-SUMMARY.md`
</output>
